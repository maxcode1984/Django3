{% extends 'default.html' %}

{% load custom_filters %}

{% block title %}
Все новости
{% endblock title %}

{% block content %}
    <h1>Список всех новостей</h1>
    <hr>
    {% if posts %}
        {% for post in posts %}
            <div>
                <h2>
                    <!-- Применяем фильтр к заголовку -->
                    <a href="{% url 'post_detail' post.pk %}">{{ post.title|censor }}</a>
                </h2>
                <!-- Форматируем дату и выводим превью текста с цензурой -->
                <p>{{ post.post_time|date:'d.m.Y' }}</p>
                <p>{{ post.text|truncatechars:20|censor }}</p>
            </div>
            <hr>
        {% endfor %}
    {% else %}
        <h2>Новостей пока нет!</h2>
    {% endif %}
{% endblock content %}
